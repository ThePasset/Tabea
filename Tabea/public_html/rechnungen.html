<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8" />
        <title></title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link rel="stylesheet" type="text/css" href="styles\layout.css"/>
        <link rel="stylesheet" type="text/css" href="styles\rechnungen.css"/>

        <style>
            .P1Label{
                display: block;
                width: 100px;
                float: left;
                
            }
            
            .P1Div{
                margin-top: 20px;
            }

            .FormInput{
                margin-bottom: 5px;
            }
            
            #P1Content{
                width: 300px;
                padding: 10px;
            }

            .PopupButton{
                width: 100px;
                margin-top:10px;
                margin-right:5px;
                height: 30px;
            }
            
            #P2Content{
                width: 300px;
                padding: 10px;
                position:absolute;
                top: 300px;
                left:5%;
            }
            

        </style>

        <script>
            $(document).ready(function(){
                $('.editValues').click(function () {
                    $(this).parents('tr').find('td.editableColumns').each(function() {
                        var html = $(this).html();
                        var input = $('<input class="editableColumnsStyle" type="text" />');
                        input.val(html);
                        $(this).html(input);
                    });
                });
            });

            
        </script>
        
    </head>
    <body>
        <!--Header-->
        <div class="header">
            Rechnungsformular
            <input type="button" class="headerButton" id="buttonBack" onclick="location.href = 'mainPage.html'" value="Zurück"/>
        </div>

        <!--Formular-->
        <div id="Form">

            <!--<div id="DivAnrede" class="FormInputDiv">
                <label for="FormAnrede" class="FormLabel">
                    Anrede des Kunden/der Kundin:
                </label>

                <select id="FormAnrede" class="FormInput dropInput">
                    <option value="herr">Herr</option>
                    <option value="frau">Frau</option>
                </select>
            </div> -->
            <div id="DivLeistBeschr" class="FormInputDiv">
                <label class="FormLabel" for="LeistBeschr">Leistungsbeschreibung
                    <dfn title="z.B.: Ich erlaube mir, für die Tätigkeit als Tagesmutter/Mobil Mami von mir erbrachte Leistungen, in Rechnung zu stellen">
                        <img class="toolTipIcon" src="bilder/fragezeichen.png" alt="?"/>
                    </dfn>
                    :
                </label>
                <br/>
                <textarea class="FormInput" id="LeistBeschr"></textarea>
            </div>
            <div id="DivKunde" class="FormInputDiv">
                <label class="FormLabel" for="FormEmpfaenger">Kunde:</label>
                <select class="FormInput dropInput longInput" id="FormEmpfaenger">
                    <option>Max Mustermann</option>
                    <option>Michaela Musterfrau</option>
                </select>
                <button class="button FormInput" id="FormEmpfaengerChange" onclick="popup_open('PopupKundeBearbeiten')">Bearbeiten</button>
            </div>
            <div id="DivRechnMatrix" class="FormInputDiv">
                <table id="FormInputMatrix" border="1">
                    <caption>Betreuungsstunden</caption>
                    <tr>
                        <td class="Desc">Kernzeiten</td>
                        <td class="Desc">Randzeiten</td>
                        <td class="Desc">Sonstige</td>
                        <td class="Desc">Gesamt</td>
                        <td class="Desc"> Betreuungsbeitrag<br/>/ Std Kernzeit</td>
                        <td class="Desc"> Betreuungsbeitrag<br/>/ Std Randzeit</td>
                        <td class="Desc"> Betreuungsbeitrag<br/>/ Std Sonstige</td>
                        <td class="Desc"> Betrag</td>
                    </tr>
                    </thead>
                    <tbody id="FormInputMatrixBody">
                        <tr>
                            <td class="Desc">
                                Kind
                                <input class="AddButton button" type="button" value="+" onclick="popup_open('PopupAddChild')"/>
                            </td>
                        </tr>
                        <tr id="ZwSum">
                            <td class="Desc Bold">Zwischensumme</td>
                        </tr>
                        <tr id="Landesf">
                            <td class="Desc">abzüglich Landesförderung- Zuschuss zum Betreuungsbeitrag</td>
                        </tr>
                        <tr id="Verpf">
                            <td class="Desc">Verpflegung</td>
                        </tr>
                        <tr id="Bastelb">
                            <td class="Desc"> Bastelbeiträge</td>
                        </tr>
                        <tr>
                            <td class="Desc">
                                Sonstige
                                <input class="AddButton button" type="button" value="+" onclick="popup_open('PopupAddMisc')"/>
                            </td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr id="TotSum">
                            <td class="Desc Bold">Gesamtsumme</td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>

        <!--Popups-->
        <div id="PopupKundeBearbeiten" class="popup">
            <div id="P1Content" class="content">
                <div class="P1Div">
                    <label for="FormAnrede">
                        Anrede des Kunden/der Kundin:
                    </label>
                    <select id="FormAnrede" class="FormInput dropInput">
                        <option value="herr">Herr</option>
                        <option value="frau">Frau</option>
                    </select>
                </div>
                <div class="P1Div">
                    <label class="P1Label" for="P1Titel">Titel:</label>
                    <input class="FormInput longInput" type="text" id="P1Titel"/>
                </div>
                <div>
                    <label class="P1Label" for="P1Vname">Vorname:</label>
                    <input class="FormInput longInput" type="text" id="P1Vname"/>
                </div>
                <div>
                    <label class="P1Label" for="P1Nname">Nachname: </label>
                    <input class="FormInput longInput" type="text" id="P1Nname"/>
                </div>
                <div>
                    <label class="P1Label" for="P1Strasse">Stra&szlig;e:</label>
                    <input class="FormInput longInput" type="text" id="P1Strasse"/>
                </div>
                <div>
                    <label class="P1Label" for="P1StraNum">Stra&szlig;en-Nr.:</label>
                    <input class="FormInput longInput" type="text" id="P1StraNum"/>
                </div>
                <div>
                    <label class="P1Label" for="P1StiNum">Stiegen-Nr.:</label>
                    <input class="FormInput longInput" type="text" id="P1StiNum"/>
                </div>
                <div>
                    <label class="P1Label" for="P1TuerNum">T&uuml;r-Nr.:</label>
                    <input class="FormInput longInput" type="text" id="P1TuerNum"/>
                </div>
                <div>
                    <label class="P1Label" for="P1PLZ">PLZ:</label>
                    <input class="FormInput longInput" type="number" id="P1PLZ"/>
                </div>
                <div>
                    <label class="P1Label" for="P1Ort">Ort:</label>
                    <input class="FormInput longInput" type="text" id="P1Ort"/>
                </div>
                <div>
                    <input class="button FormInput PopupButton" type="button" value="Speichern" onclick="popup_close()"/>
                    <input class="button FormInput PopupButton" type="button" value="Abbrechen" onclick="popup_close()"/>
                </div>
            </div>
        </div>
        
        <div id="PopupAddChild" class="popup">
            <div id="P2Content" class="content">
            <select id="P2Select" class="FormInput dropInput longInput" id="P1ChildSelector">
                <option>Maxi</option>
                <option>Alexander</option>
                <option>Lukas</option>
            </select>
            <div>
                <input class="button FormInput PopupButton" type="button" value="Hinzufügen" onclick="popup_submit('popupAddChild')"/>
                <input class="button FormInput PopupButton" type="button" value="Abbrechen" onclick="popup_close()"/>
            </div>
            </div>
        </div>
        <script>
            
            var toFill = ["ZwSum","Landesf","Verpf", "Bastelb", "TotSum"];
            var k = 0;
            var editable = ["Landesf", "Verpf", "Bastelb"];
            toFill.forEach(function(ParentID){
                var Parent = document.getElementById(ParentID);
                
                var ColAnz = 6;
                k++;
                for(i = 0; i <= ColAnz; i++){
                    if($.inArray(ParentID, editable) === -1){
                        Parent.innerHTML = Parent.innerHTML + "<td><div>"+ k + i +"</div></td>";
                    }else {
                        Parent.innerHTML = Parent.innerHTML + "<td><div contenteditable>"+ k + i +"</div></td>";
                    }
                }
            });
            
            
            function popup_open(toOpen) {
                document.getElementById(toOpen).style.display = 'block';
            }
            
            function popup_close(){
                $(".popup").css("display", "none");
            }
            
            function popup_submit(type){
                
            }


        </script>
    </body>
</html>